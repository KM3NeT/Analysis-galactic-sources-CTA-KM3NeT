---
version: 0.9.0
inputs:
  directories:
    - data/models/
    - data/km3net/
    - src/

  files:
    - Analysis/reana/create_km3net_dataset.py

  parameters:
    main: create_km3net_dataset.py
    path: Analysis/reana/

workflow:
  type: serial
  specification:
    steps:
      - name: analysis
        environment: "gitlab-registry.in2p3.fr/escape2020/virtual-environment/docker-images/datalake-singleuser-combined_ana_km3net_cta:latest"
        kubernetes_memory_limit: "8Gi"
        commands:
          # - pip install --user nbconvert
          - cd "${path}" && python "${main}"
          # - mv "${path}/new_pic.png" "${plot}"
#           - cd reana_analysis && python plot_from_fits.py
# --data "${data}"
# --plot "${plot}"
outputs:
  directories:
    - results
  #files:
  #  - results/file_name.fits.gz
